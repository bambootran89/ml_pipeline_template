# Feature Engineering Sub-Pipeline Template
# Reusable workflow for feature engineering
pipeline:
  name: "feature_engineering_template"

  steps:
    # Step 1: Apply clustering for segments
    - id: "segment_clusters"
      type: "clustering"
      model_name: "kmean"
      output_as_feature: true
      hyperparams:
        n_clusters: "{{n_clusters}}"
      wiring:
        inputs:
          data: "input_data"
        outputs:
          features: "segment_features"

    # Step 2: Additional feature extraction
    - id: "feature_extract"
      type: "generic_model"
      depends_on: ["segment_clusters"]
      model_name: "{{feature_model}}"
      model_type: "ml"
      output_as_feature: true
      wiring:
        inputs:
          data: "input_data"
          features: "segment_features"
        outputs:
          features: "extracted_features"
