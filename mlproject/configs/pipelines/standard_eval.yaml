pipeline:
  name: "standard_eval"
  steps:
    - id: "load_data"
      type: "data_loader"
      enabled: true

    - id: "preprocess"
      type: "preprocessor"
      enabled: true
      depends_on: ["load_data"]
      is_train: false  # Critical: load existing state from MLflow, do not refit
      alias: "latest"   # Uses the same alias as the model (can be overridden via CLI)

    - id: "init_artifacts"
      type: "mlflow_loader"
      enabled: true
      alias: "latest"
      load_map:
        - { step_id: "train_model", context_key: "train_model_model" }

    - id: "evaluate"
      type: "evaluator"
      enabled: true
      depends_on: ["init_artifacts", "preprocess"]
      model_step_id: "train_model"
      wiring:
        inputs: { features: "preprocessed_data", targets: "target_data" }

    # Optional step: logs evaluation metrics to storage or tracking systems
    - id: "log_results"
      type: "logger"
      enabled: false  # Disabled by default for evaluation pipelines
      depends_on: ["evaluate"]
      model_step_id: "load_model"
      eval_step_id: "evaluate"
