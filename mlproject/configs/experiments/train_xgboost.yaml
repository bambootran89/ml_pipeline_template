# Standard XGBoost Training Pipeline
# Usage: python -m mlproject.src.pipeline.dag_run train --config configs/experiments/xgboost.yaml

defaults:
  - ../base/preprocessing.yaml
  - ../base/model.yaml
  - ../base/training.yaml
  - ../base/evaluation.yaml
  - ../base/mlflow.yaml
  - ../pipelines/standard_training.yaml

data:
  path: "mlproject/data/ETTh1.csv"
  index_col: "date"
  target_columns: ["HUFL", "MUFL"]
  features: ["HUFL", "MUFL", "mobility_inflow"]
  return_type: pandas
  type: timeseries

experiment:
  name: "xgboost_training"
  type: "timeseries"
  model: "xgboost"
  model_type: "ml"
  hyperparams:
    input_chunk_length: 24
    output_chunk_length: 6
    n_targets: 2
    type: "regression"
    args:
      n_estimators: 100
      max_depth: 5
      learning_rate: 0.1
      objective: "reg:squarederror"
      early_stopping_round: 15

# Pipeline configuration
pipeline:
  steps:
    - id: "load_data"
      type: "data_loader"
      enabled: true

    - id: "preprocess"
      type: "preprocessor"
      enabled: true

    - id: "train_model"
      type: "model"
      enabled: true

    - id: "evaluate"
      type: "evaluator"
      enabled: true
      model_step_id: "train_model"

    - id: "log_results"
      type: "logger"
      enabled: true
